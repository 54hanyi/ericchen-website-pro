---
title: "MDX ç­†è¨˜ç³»çµ±é–‹ç™¼è¡€æ·šå²ï¼šå¾ import åˆ° compileMDX"
description: "è¨˜éŒ„æˆ‘å¦‚ä½•å¾å‚³çµ± import æ¨¡çµ„ï¼Œè½‰æˆç”¨ compileMDX è§£æ Frontmatterï¼Œè§£æ±º Next.js App Router çš„å‘ã€‚"
tags: ["next.js", "MDX", "compileMDX", "App Router", "è¡€æ·šå²"]
date: "2025-06-03"
---

# MDX ç­†è¨˜ç³»çµ±é–‹ç™¼è¡€æ·šå²ï¼šå¾ `import` åˆ° `compileMDX`

## ğŸš© å•é¡ŒèƒŒæ™¯

æˆ‘æƒ³è¦æ‰“é€ ä¸€å€‹ **MDX ç­†è¨˜ç³»çµ±**ï¼ŒåŠŸèƒ½éœ€æ±‚ï¼š

- ç­†è¨˜åˆ—è¡¨é¡¯ç¤ºæ‰€æœ‰ç­†è¨˜
- æ¯ç¯‡ç­†è¨˜èƒ½é»é€²å»ç€è¦½è©³ç´°å…§å®¹
- æ”¯æ´ **ä¸Šä¸€é  / ä¸‹ä¸€é **
- æ¯ç¯‡ç­†è¨˜è¦æœ‰ `title`ã€`description`ã€`tags`ã€`date`

ä¸€é–‹å§‹æ¡ç”¨ï¼š

```tsx
export const metadata = {
  title: "æ·±å…¥ç†è§£ useEffect",
  description: "é€™ç¯‡æ–‡ç« å¸¶ä½ ä¸€æ¬¡é˜æ‚¬ useEffect çš„æ‰€æœ‰ä¾è³´é™·é˜±èˆ‡æ­£ç¢ºç”¨æ³•ã€‚",
  tags: ["react", "useEffect", "hook"],
  date: "2024-05-26",
};
```

æ­é…ï¼š

```tsx
const post = await import(`../${params.slug}/page.mdx`);
```

ä¾†å–å¾—æ–‡ç«  metadataã€‚

## âš ï¸ ç¢°åˆ°å¤§å•é¡Œ

- âŒ Next.js App Router (next 13/14/15) + RSC ä¸å…è¨± import() å‹•æ…‹è®€æª”
- âŒ params.slug å¿…é ˆå…ˆè§£æ§‹ï¼Œå¦å‰‡æœƒéŒ¯ï¼š

  `params should be awaited before using its properties`

- âŒ import æœƒè®“ build å¡æ­»ã€ç­†è¨˜ç„¡æ³•ç”Ÿæˆ
- âŒ metadata æŠ“ä¸åˆ°ï¼Œåˆ—è¡¨é¡¯ç¤ºç©ºç™½

## ğŸš‘ è§£æ³•

### 1. ä½¿ç”¨ `next-mdx-remote/rsc`

å®˜æ–¹æ¨è–¦æ–°åšæ³•ï¼š

```tsx
import { compileMDX } from "next-mdx-remote/rsc";
```

æ­é…é¸é …ï¼š

```tsx
options: {
  parseFrontmatter: true;
}
```

é€™æ¨£å¯ä»¥åœ¨ **è®€å– MDX æ™‚ç›´æ¥è§£æ Frontmatter**ï¼

### 2. èª¿æ•´ MDX æª”æ¡ˆæ ¼å¼

MDX æœ€ä¸Šé¢æ”¹æˆ YAML Frontmatterï¼š

```mdx
---
title: "Next.js åœ–ç‰‡ç„¡æ³•é¡¯ç¤ºçš„è§£æ³•"
description: "éƒ¨ç½²å¾Œåœ–ç‰‡ä¸è¦‹ï¼Ÿä½ éœ€è¦åŠ ä¸Š image domainsï¼"
tags: ["next.js", "image", "deploy", "bug"]
date: "2024-05-25"
---

# Next.js åœ–ç‰‡ç„¡æ³•é¡¯ç¤ºçš„è§£æ³•

éƒ¨ç½²å¾Œåœ–ç‰‡ä¸è¦‹ï¼Ÿé€šå¸¸åŸå› æ˜¯ä½ æ²’åœ¨ `next.config.js` è¨­å®š `images.domains`ï¼
```

### 3. ä¿®æ”¹ getAllNotes

éæª¢è³‡æ–™å¤¾ `data/notes/{slug}/page.mdx`ï¼Œæ¯å€‹æª”æ¡ˆç”¨ `compileMDX` è§£æ Frontmatterï¼š

```tsx
const { frontmatter } = await compileMDX({
  source: file,
  options: { parseFrontmatter: true },
});
```

çµ„æˆï¼š

```ts
type NoteMeta = {
  slug: string;
  title: string;
  description: string;
  tags?: string[];
  date?: string;
};
```

ä¸¦ä¾ date æ’åºã€‚

### 4. ä¿®æ”¹ generateMetadata

ç›´æ¥è®€å– MDX çš„ Frontmatterï¼š

```tsx
const { frontmatter } = await compileMDX({
  source,
  options: { parseFrontmatter: true },
});

return {
  title: frontmatter.title,
  description: frontmatter.description,
};
```

## ğŸ‰ æœ€çµ‚æˆæœ

- ç­†è¨˜åˆ—è¡¨æ­£ç¢ºé¡¯ç¤º

- ç­†è¨˜å…§å®¹æ­£ç¢ºæ¸²æŸ“

- ä¸Šä¸€ç¯‡ã€ä¸‹ä¸€ç¯‡é€£çµæ­£å¸¸

- ç­†è¨˜æ•¸é‡å¯ä»¥ç¸½ç®—
