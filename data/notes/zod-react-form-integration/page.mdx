---
title: 'Zod #6ï¼šReact è¡¨å–®æ•´åˆèˆ‡éŒ¯èª¤æç¤º'
description: 'å­¸ç¿’å¦‚ä½•å°‡ Zod æ­é… React è¡¨å–®ä½¿ç”¨ï¼Œæ•´åˆé©—è­‰ã€éŒ¯èª¤è¨Šæ¯é¡¯ç¤ºï¼Œèˆ‡å¸¸è¦‹çš„ React Hook Form å¯¦ä½œæ–¹å¼ã€‚'
tags: ['zod', 'react', 'form', 'é©—è­‰æ•´åˆ']
date: '2025-06-17'
---

# ğŸ“˜ Zod #6ï¼šReact è¡¨å–®æ•´åˆèˆ‡éŒ¯èª¤æç¤º

Zod å¯ä»¥èˆ‡ React è¡¨å–®æ•´åˆï¼Œå¸¸æ­é…çš„å·¥å…·æ˜¯ [`react-hook-form`](https://react-hook-form.com/)ã€‚æœ¬ç« å°‡ä»‹ç´¹å…©ç¨®æ–¹å¼ï¼š

1. âœ… æ‰‹å‹•é©—è­‰ + è‡ªè¡Œé¡¯ç¤ºéŒ¯èª¤è¨Šæ¯
2. âœ… æ•´åˆ `react-hook-form` + `zodResolver` è‡ªå‹•é©—è­‰

## âœ… æ‰‹å‹•é©—è­‰ï¼šç”¨ `safeParse()` é©—è­‰è¼¸å…¥

```tsx
import { useState } from 'react';
import { z } from 'zod';

const schema = z.object({
  name: z.string().min(2, 'åå­—è‡³å°‘ 2 å€‹å­—'),
  age: z.number().min(18, 'å¹´é½¡éœ€æ»¿ 18 æ­²'),
});

export default function MyForm() {
  const [formData, setFormData] = useState({ name: '', age: '' });
  const [error, setError] = useState('');

  const handleSubmit = (e) => {
    e.preventDefault();

    const parsed = schema.safeParse({
      name: formData.name,
      age: Number(formData.age),
    });

    if (!parsed.success) {
      setError(parsed.error.format());
    } else {
      console.log('é©—è­‰æˆåŠŸï¼', parsed.data);
      setError('');
    }
  };

  return (
    <form onSubmit={handleSubmit}>
      <input
        placeholder="åå­—"
        value={formData.name}
        onChange={(e) => setFormData({ ...formData, name: e.target.value })}
      />
      <input
        placeholder="å¹´é½¡"
        value={formData.age}
        onChange={(e) => setFormData({ ...formData, age: e.target.value })}
      />
      <button type="submit">é€å‡º</button>

      {error?.name && <p>{error.name._errors[0]}</p>}
      {error?.age && <p>{error.age._errors[0]}</p>}
    </form>
  );
}
```

## ğŸ”„ æ­é… React Hook Form + Zod

### ğŸ“¦ å®‰è£å¥—ä»¶

```bash
npm install react-hook-form @hookform/resolvers zod
```

### ğŸ§© ä½¿ç”¨ zodResolver

```tsx
import { useForm } from 'react-hook-form';
import { zodResolver } from '@hookform/resolvers/zod';
import { z } from 'zod';

const schema = z.object({
  email: z.string().email(),
});

export default function ZodForm() {
  const {
    register,
    handleSubmit,
    formState: { errors },
  } = useForm({
    resolver: zodResolver(schema),
  });

  const onSubmit = (data) => {
    console.log('æˆåŠŸé€å‡ºï¼š', data);
  };

  return (
    <form onSubmit={handleSubmit(onSubmit)}>
      <input {...register('email')} placeholder="Email" />
      {errors.email && <p>{errors.email.message}</p>}

      <button type="submit">æäº¤</button>
    </form>
  );
}
```

## âœ… å°çµ

- Zod å¯é€é `safeParse()` é©—è­‰è¡¨å–®è³‡æ–™
- æ­é… `react-hook-form` ä½¿ç”¨ `zodResolver` æœ€ç°¡ä¾¿
- éŒ¯èª¤æ ¼å¼å¯ç”± `format()` æˆ– `formState.errors` å–å¾—
- å»ºè­°ç”¨ TypeScript + z.infer è‡ªå‹•è£œé½Šå‹åˆ¥

ğŸ‘‰ ä¸‹ä¸€ç« ï¼Œæˆ‘å€‘æœƒä»‹ç´¹å¦‚ä½•æ¸¬è©¦ Zod schemaï¼Œä¸¦åœ¨å‰å¾Œç«¯æ•´åˆæ™‚ä½œç‚º API å…¥å£é©—è­‰ï¼
