---
title: "MDX ç­†è¨˜ç³»çµ±é–‹ç™¼è¡€æ·šå²ï¼šå¾ import åˆ° compileMDX"
description: "è¨˜éŒ„æˆ‘å¦‚ä½•å¾å‚³çµ± import æ¨¡çµ„ï¼Œè½‰æˆç”¨ compileMDX è§£æ Frontmatterï¼Œè§£æ±º Next.js App Router çš„å‘ã€‚"
tags: ["next.js", "MDX", "compileMDX", "App Router", "è¡€æ·šå²"]
date: "2025-06-02"
---

# MDX ç­†è¨˜ç³»çµ±é–‹ç™¼è¡€æ·šå²ï¼šå¾ `import` åˆ° `compileMDX`

## ğŸš© å•é¡ŒèƒŒæ™¯

æˆ‘æƒ³è¦æ‰“é€ ä¸€å€‹ **MDX ç­†è¨˜ç³»çµ±**ï¼ŒåŠŸèƒ½éœ€æ±‚ï¼š

- ç­†è¨˜åˆ—è¡¨é¡¯ç¤ºæ‰€æœ‰ç­†è¨˜
- æ¯ç¯‡ç­†è¨˜èƒ½é»é€²å»ç€è¦½è©³ç´°å…§å®¹
- æ”¯æ´ **ä¸Šä¸€é  / ä¸‹ä¸€é **
- æ¯ç¯‡ç­†è¨˜è¦æœ‰ `title`ã€`description`ã€`tags`ã€`date`

---

## â›”ï¸ ä¸€é–‹å§‹æ¡ç”¨çš„åšæ³•

åœ¨æ¯ç¯‡ç­†è¨˜æª”æ¡ˆä¸­å¯«ï¼š

```tsx
export const metadata = {
  title: "æ·±å…¥ç†è§£ useEffect",
  description: "é€™ç¯‡æ–‡ç« å¸¶ä½ ä¸€æ¬¡é‡æ¸… useEffect çš„æ‰€æœ‰ä¾è³´é™·é˜±èˆ‡æ­£ç¢ºç”¨æ³•ã€‚",
  tags: ["react", "useEffect", "hook"],
  date: "2024-05-26",
};
```

æ­é…å‹•æ…‹è¼‰å…¥ï¼š

```tsx
const post = await import(`../${params.slug}/page.mdx`);
```

ä¾†å–å¾—æ–‡ç«  `metadata`ã€‚

---

## âš ï¸ ç¢°åˆ°çš„å•é¡Œ

> âŒ Next.js App Router (next 13/14/15) + RSC ä¸å…è¨± `import()` å‹•æ…‹è®€æª”  
> âŒ `params.slug` å¿…é ˆè¦å…ˆ awaitï¼Œå¦å‰‡æœƒå‡ºéŒ¯ï¼š  
> `params should be awaited before using its properties`  
> âŒ `import()` æœƒè®“ build å¡æ­»ï¼Œç„¡æ³•ç”Ÿæˆç­†è¨˜åˆ—è¡¨  
> âŒ `metadata` æŠ“ä¸åˆ°ï¼Œå°è‡´ç­†è¨˜åˆ—è¡¨æ˜¯ç©ºç™½çš„ï¼

---

## ğŸš‘ è§£æ³•ï¼šä½¿ç”¨ `next-mdx-remote`

å®˜æ–¹æ¨è–¦çš„æ–°åšæ³•ï¼š

```tsx
import { compileMDX } from "next-mdx-remote/rsc";
```

æ­é…é¸é …ï¼š

```tsx
options: {
  parseFrontmatter: true;
}
```

âœ… é€™æ¨£åœ¨è®€å– MDX æ™‚å¯ä»¥ç›´æ¥è§£æ Frontmatterï¼

---

## ğŸ› ï¸ ä¿®æ”¹ MDX æª”æ¡ˆæ ¼å¼

åŸæœ¬æ˜¯ï¼š

```tsx
export const metadata = {...}
```

æ”¹æˆæœ€ä¸Šé¢ä½¿ç”¨ YAML Frontmatterï¼š

```mdx
---
title: "Next.js åœ–ç‰‡ç„¡æ³•é¡¯ç¤ºçš„è§£æ³•"
description: "éƒ¨ç½²å¾Œåœ–ç‰‡ä¸è¦‹ï¼Ÿä½ éœ€è¦åŠ ä¸Š image domainsï¼"
tags: ["next.js", "image", "deploy", "bug"]
date: "2024-05-25"
---
```

æ³¨æ„ï¼š`---` ä¸­é–“æ˜¯ YAML æ ¼å¼ï¼Œ**æ­£æ–‡å¯«åœ¨ Frontmatter ä¸‹æ–¹**ï¼

---

## ğŸ”§ ä¿®æ”¹ `getAllNotes`

éæ­·è³‡æ–™å¤¾ `data/notes/{slug}/page.mdx`ï¼Œæ¯å€‹æª”æ¡ˆç”¨ `compileMDX` è§£æ Frontmatterï¼š

```tsx
const { frontmatter } = await compileMDX({
  source: file,
  options: { parseFrontmatter: true },
});
```

ç„¶å¾Œçµ„æˆç­†è¨˜è³‡æ–™ï¼š

```tsx
type NoteMeta = {
  slug: string;
  title: string;
  description: string;
  tags?: string[];
  date?: string;
};
```

ä¸¦ä¸”ä¾ `date` æ’åºï¼

---

## ğŸ”§ ä¿®æ”¹ `generateMetadata`

ç›´æ¥è®€å– MDX çš„ Frontmatterï¼š

```tsx
const { frontmatter } = await compileMDX({
  source,
  options: { parseFrontmatter: true },
});

return {
  title: frontmatter.title,
  description: frontmatter.description,
};
```

---

## ğŸ‰ æœ€çµ‚æˆæœ

- âœ… ç­†è¨˜åˆ—è¡¨æ­£ç¢ºé¡¯ç¤º
- âœ… ç­†è¨˜å…§å®¹æ­£ç¢ºæ¸²æŸ“
- âœ… æ”¯æ´ **ä¸Šä¸€é  / ä¸‹ä¸€é **
- âœ… ç­†è¨˜æ•¸é‡çµ±è¨ˆåŠŸèƒ½

---

## ğŸ“ å°çµ

é€™æ¬¡èŠ±äº†ä¸å°‘æ™‚é–“è¸©å‘ï¼Œå¾ `import()` åˆ° `compileMDX`ï¼Œç¸½ç®—æˆåŠŸæŠŠ MDX ç­†è¨˜ç³»çµ±é †åˆ©åšå‡ºä¾†äº†ï¼æœªä¾†æƒ³å„ªåŒ–çš„æ–¹å‘ï¼š

- æ”¯æ´ Tag ç­†è¨˜åˆ†é¡
- æ”¯æ´ç­†è¨˜æœå°‹
- MDX æ”¯æ´åœ–ç‰‡èˆ‡å…¶ä»–å…ƒä»¶æ’å…¥
